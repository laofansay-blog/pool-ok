<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•æ³¨è®°å½•æ˜¾ç¤ºæµ‹è¯•</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/winning-numbers.css">
    <style>
        body {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .test-title {
            color: white;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .test-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 18px;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }
        
        .test-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .test-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .test-result {
            padding: 10px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            color: white;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .data-table th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: bold;
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸ¯ æŠ•æ³¨è®°å½•æ˜¾ç¤ºæµ‹è¯•</h1>
        
        <!-- æ–°æ ¼å¼JSONBæµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-subtitle">ğŸ“Š æ–°æ ¼å¼ (JSONB) æŠ•æ³¨è®°å½•</h2>
            
            <div class="test-item">
                <div class="test-label">å¤šç»„æŠ•æ³¨ç¤ºä¾‹</div>
                <div class="test-result" id="jsonbExample1"></div>
            </div>
            
            <div class="test-item">
                <div class="test-label">å•ç»„æŠ•æ³¨ç¤ºä¾‹</div>
                <div class="test-result" id="jsonbExample2"></div>
            </div>
            
            <div class="test-item">
                <div class="test-label">æ–‡å­—æè¿°æ ¼å¼</div>
                <div class="test-result" id="textExample1"></div>
            </div>
        </div>
        
        <!-- æ—§æ ¼å¼æ•°ç»„æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-subtitle">ğŸ“‹ æ—§æ ¼å¼ (æ•°ç»„) æŠ•æ³¨è®°å½•</h2>
            
            <div class="test-item">
                <div class="test-label">æ•°ç»„æ ¼å¼ç¤ºä¾‹</div>
                <div class="test-result" id="arrayExample1"></div>
            </div>
            
            <div class="test-item">
                <div class="test-label">æ–‡å­—æè¿°æ ¼å¼</div>
                <div class="test-result" id="textExample2"></div>
            </div>
        </div>
        
        <!-- æŠ•æ³¨è®°å½•è¡¨æ ¼æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-subtitle">ğŸ“ æŠ•æ³¨è®°å½•è¡¨æ ¼å±•ç¤º</h2>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>è½®æ¬¡</th>
                        <th>é€‰æ‹©æ•°å­—</th>
                        <th>æŠ•æ³¨é‡‘é¢</th>
                        <th>çŠ¶æ€</th>
                        <th>æ”¶ç›Š</th>
                    </tr>
                </thead>
                <tbody id="betTableBody">
                    <!-- è¡¨æ ¼å†…å®¹å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
        
        <!-- é”™è¯¯å¤„ç†æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-subtitle">âš ï¸ é”™è¯¯å¤„ç†æµ‹è¯•</h2>
            
            <div class="test-item">
                <div class="test-label">ç©ºæ•°æ®</div>
                <div class="test-result" id="errorExample1"></div>
            </div>
            
            <div class="test-item">
                <div class="test-label">æ— æ•ˆæ ¼å¼</div>
                <div class="test-result" id="errorExample2"></div>
            </div>
        </div>
    </div>

    <script src="scripts/winning-numbers.js"></script>
    <script>
        // æµ‹è¯•æ•°æ®
        const testData = {
            // æ–°æ ¼å¼JSONBæ•°æ®
            jsonbMultiple: {
                "1": [1, 2],
                "2": [3],
                "3": [],
                "4": [],
                "5": [7, 8],
                "6": [],
                "7": [],
                "8": [],
                "9": [],
                "10": [9]
            },
            
            jsonbSingle: {
                "1": [5],
                "2": [],
                "3": [],
                "4": [],
                "5": [],
                "6": [],
                "7": [],
                "8": [],
                "9": [],
                "10": []
            },
            
            // æ—§æ ¼å¼æ•°ç»„æ•°æ®
            arrayFormat: [1, 2, 3, 4, 5, 6, 7, 8, 9],
            
            // æ¨¡æ‹ŸæŠ•æ³¨è®°å½•
            betRecords: [
                {
                    round_number: 138,
                    selected_numbers: {
                        "1": [1, 2],
                        "2": [3],
                        "3": [],
                        "4": [],
                        "5": [],
                        "6": [],
                        "7": [],
                        "8": [],
                        "9": [],
                        "10": []
                    },
                    bet_amount: 6.00,
                    status: 'pending',
                    actual_payout: 0
                },
                {
                    round_number: 137,
                    selected_numbers: {
                        "1": [5],
                        "2": [],
                        "3": [7],
                        "4": [],
                        "5": [],
                        "6": [],
                        "7": [],
                        "8": [],
                        "9": [],
                        "10": [2]
                    },
                    bet_amount: 9.00,
                    status: 'settled',
                    actual_payout: 29.40
                },
                {
                    round_number: 136,
                    selected_numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9], // æ—§æ ¼å¼
                    bet_amount: 27.00,
                    status: 'settled',
                    actual_payout: 0
                }
            ]
        }
        
        // åˆå§‹åŒ–æµ‹è¯•
        function initTests() {
            // æ–°æ ¼å¼JSONBæµ‹è¯•
            document.getElementById('jsonbExample1').innerHTML = 
                WinningNumbers.renderBetNumbers(testData.jsonbMultiple)
            
            document.getElementById('jsonbExample2').innerHTML = 
                WinningNumbers.renderBetNumbers(testData.jsonbSingle)
            
            document.getElementById('textExample1').innerHTML = 
                WinningNumbers.formatBetNumbersText(testData.jsonbMultiple)
            
            // æ—§æ ¼å¼æ•°ç»„æµ‹è¯•
            document.getElementById('arrayExample1').innerHTML = 
                WinningNumbers.renderBetNumbers(testData.arrayFormat)
            
            document.getElementById('textExample2').innerHTML = 
                WinningNumbers.formatBetNumbersText(testData.arrayFormat)
            
            // æŠ•æ³¨è®°å½•è¡¨æ ¼
            const tableBody = document.getElementById('betTableBody')
            tableBody.innerHTML = testData.betRecords.map(bet => `
                <tr>
                    <td>ç¬¬${bet.round_number}æœŸ</td>
                    <td>${WinningNumbers.renderBetNumbers(bet.selected_numbers)}</td>
                    <td>Â¥${bet.bet_amount.toFixed(2)}</td>
                    <td>
                        <span class="status ${bet.status}">
                            ${bet.status === 'settled' ? (bet.actual_payout > 0 ? 'ä¸­å¥–' : 'æœªä¸­å¥–') : 'å¾…å¼€å¥–'}
                        </span>
                    </td>
                    <td>Â¥${bet.actual_payout.toFixed(2)}</td>
                </tr>
            `).join('')
            
            // é”™è¯¯å¤„ç†æµ‹è¯•
            document.getElementById('errorExample1').innerHTML = 
                WinningNumbers.renderBetNumbers({})
            
            document.getElementById('errorExample2').innerHTML = 
                WinningNumbers.renderBetNumbers("invalid data")
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initTests)
    </script>
</body>
</html>

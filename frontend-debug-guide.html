<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬193æœŸå‰ç«¯è°ƒè¯•æŒ‡å—</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #27ae60; margin-top: 30px; }
        h3 { color: #e74c3c; }
        .step { background: #ecf0f1; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #3498db; }
        .success { background: #d5f4e6; border-left-color: #27ae60; }
        .warning { background: #fef9e7; border-left-color: #f39c12; }
        .error { background: #fadbd8; border-left-color: #e74c3c; }
        .code { background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; overflow-x: auto; }
        .highlight { background: #f1c40f; padding: 2px 5px; border-radius: 3px; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #bdc3c7; padding: 10px; text-align: left; }
        th { background: #34495e; color: white; }
        .status-ok { color: #27ae60; font-weight: bold; }
        .status-error { color: #e74c3c; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ç¬¬193æœŸ actual_payout æ˜¾ç¤ºé—®é¢˜è°ƒè¯•æŒ‡å—</h1>
        
        <div class="success">
            <h2>âœ… æœåŠ¡ç«¯æ•°æ®ç¡®è®¤</h2>
            <p><strong>ç¬¬193æœŸæœåŠ¡ç«¯æ•°æ®æ­£å¸¸ï¼š</strong></p>
            <ul>
                <li>æŠ•æ³¨é‡‘é¢ï¼š100å…ƒ</li>
                <li>å®é™…èµ”ä»˜ï¼š137.2å…ƒ</li>
                <li>èµ”ä»˜ç‡ï¼š137.20%</li>
                <li>çŠ¶æ€ï¼šå·²ç»“ç®—</li>
            </ul>
        </div>

        <div class="error">
            <h2>âŒ å‰ç«¯æ˜¾ç¤ºé—®é¢˜</h2>
            <p>ç”¨æˆ·çœ‹åˆ°çš„ <code>actual_payout</code> æ˜¾ç¤ºä¸º 0ï¼Œä½†æœåŠ¡ç«¯æ•°æ®æ˜¯æ­£ç¡®çš„ã€‚</p>
        </div>

        <h2>ğŸ” é—®é¢˜è¯Šæ–­æ­¥éª¤</h2>

        <div class="step">
            <h3>æ­¥éª¤1ï¼šæ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€</h3>
            <p>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œï¼š</p>
            <div class="code">
// æ£€æŸ¥å½“å‰ç”¨æˆ·
const { data: { user }, error } = await supabaseClient.auth.getUser()
console.log('å½“å‰ç”¨æˆ·:', user)
console.log('ç”¨æˆ·ID:', user?.id)
console.log('ç™»å½•çŠ¶æ€:', user ? 'å·²ç™»å½•' : 'æœªç™»å½•')
            </div>
            <p><strong>é¢„æœŸç»“æœï¼š</strong>åº”è¯¥æ˜¾ç¤ºç”¨æˆ·å·²ç™»å½•ä¸”æœ‰æœ‰æ•ˆçš„ç”¨æˆ·ID</p>
        </div>

        <div class="step">
            <h3>æ­¥éª¤2ï¼šæ£€æŸ¥æŠ•æ³¨è®°å½•æŸ¥è¯¢</h3>
            <p>åœ¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç æŸ¥è¯¢ç¬¬193æœŸæŠ•æ³¨è®°å½•ï¼š</p>
            <div class="code">
// æŸ¥è¯¢ç¬¬193æœŸæŠ•æ³¨è®°å½•
const { data: bets, error } = await supabaseClient
  .from('bets')
  .select(`
    *,
    rounds (
      round_number,
      winning_numbers,
      status,
      draw_time
    )
  `)
  .eq('rounds.round_number', 193)

console.log('æŸ¥è¯¢ç»“æœ:', bets)
console.log('æŸ¥è¯¢é”™è¯¯:', error)

if (bets && bets.length > 0) {
  bets.forEach(bet => {
    console.log(`æŠ•æ³¨ID: ${bet.id}`)
    console.log(`æŠ•æ³¨é‡‘é¢: ${bet.bet_amount}`)
    console.log(`å®é™…èµ”ä»˜: ${bet.actual_payout}`)
    console.log(`æ˜¯å¦ä¸­å¥–: ${bet.is_winner}`)
    console.log(`çŠ¶æ€: ${bet.status}`)
  })
}
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤3ï¼šæ£€æŸ¥ç½‘ç»œè¯·æ±‚</h3>
            <ol>
                <li>æ‰“å¼€å¼€å‘è€…å·¥å…·çš„ <strong>Network</strong> æ ‡ç­¾é¡µ</li>
                <li>åˆ·æ–°æŠ•æ³¨è®°å½•é¡µé¢</li>
                <li>æŸ¥æ‰¾å¯¹ <code>/rest/v1/bets</code> çš„è¯·æ±‚</li>
                <li>æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦åŒ…å«æ­£ç¡®çš„ <code>Authorization</code> token</li>
                <li>æ£€æŸ¥å“åº”æ•°æ®ä¸­çš„ <code>actual_payout</code> å­—æ®µ</li>
            </ol>
        </div>

        <div class="step">
            <h3>æ­¥éª¤4ï¼šå¼ºåˆ¶åˆ·æ–°ç¼“å­˜</h3>
            <p>æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¸…é™¤ç¼“å­˜ï¼š</p>
            <ul>
                <li><strong>ç¡¬åˆ·æ–°ï¼š</strong>Ctrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac)</li>
                <li><strong>æ¸…é™¤ç¼“å­˜ï¼š</strong>Ctrl+Shift+Delete (Windows) æˆ– Cmd+Shift+Delete (Mac)</li>
                <li><strong>é‡æ–°ç™»å½•ï¼š</strong>é€€å‡ºè´¦æˆ·åé‡æ–°ç™»å½•</li>
            </ul>
        </div>

        <h2>ğŸ› ï¸ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ</h2>

        <div class="step warning">
            <h3>æ–¹æ¡ˆ1ï¼šRLSæƒé™é—®é¢˜</h3>
            <p>å¦‚æœæŸ¥è¯¢è¿”å›ç©ºæ•°ç»„æˆ–æƒé™é”™è¯¯ï¼š</p>
            <ul>
                <li>ç¡®ä¿ç”¨æˆ·å·²æ­£ç¡®ç™»å½•</li>
                <li>æ£€æŸ¥æŠ•æ³¨è®°å½•æ˜¯å¦å±äºå½“å‰ç™»å½•ç”¨æˆ·</li>
                <li>è”ç³»ç®¡ç†å‘˜æ£€æŸ¥RLSç­–ç•¥è®¾ç½®</li>
            </ul>
        </div>

        <div class="step warning">
            <h3>æ–¹æ¡ˆ2ï¼šå‰ç«¯ç¼“å­˜é—®é¢˜</h3>
            <p>å¦‚æœæŸ¥è¯¢è¿”å›æ—§æ•°æ®ï¼š</p>
            <ul>
                <li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’ŒCookie</li>
                <li>ä½¿ç”¨æ— ç—•æ¨¡å¼é‡æ–°ç™»å½•</li>
                <li>æ£€æŸ¥å‰ç«¯æ˜¯å¦æœ‰æ•°æ®ç¼“å­˜é€»è¾‘</li>
            </ul>
        </div>

        <div class="step warning">
            <h3>æ–¹æ¡ˆ3ï¼šæ•°æ®åŒæ­¥å»¶è¿Ÿ</h3>
            <p>å¦‚æœæ•°æ®æ›´æ–°æœ‰å»¶è¿Ÿï¼š</p>
            <ul>
                <li>ç­‰å¾…å‡ åˆ†é’Ÿåé‡æ–°æŸ¥è¯¢</li>
                <li>æ‰‹åŠ¨åˆ·æ–°æŠ•æ³¨è®°å½•åˆ—è¡¨</li>
                <li>æ£€æŸ¥æ˜¯å¦æœ‰å®æ—¶æ•°æ®åŒæ­¥æœºåˆ¶</li>
            </ul>
        </div>

        <h2>ğŸ“Š æ•°æ®å¯¹æ¯”è¡¨</h2>
        <table>
            <thead>
                <tr>
                    <th>æ•°æ®æº</th>
                    <th>ç¬¬193æœŸæŠ•æ³¨é‡‘é¢</th>
                    <th>ç¬¬193æœŸå®é™…èµ”ä»˜</th>
                    <th>çŠ¶æ€</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>æœåŠ¡ç«¯è½®æ¬¡è¡¨</td>
                    <td>100å…ƒ</td>
                    <td>137.2å…ƒ</td>
                    <td class="status-ok">âœ… æ­£å¸¸</td>
                </tr>
                <tr>
                    <td>æœåŠ¡ç«¯æŠ•æ³¨è¡¨</td>
                    <td>100å…ƒ</td>
                    <td>137.2å…ƒ</td>
                    <td class="status-ok">âœ… æ­£å¸¸</td>
                </tr>
                <tr>
                    <td>å‰ç«¯æ˜¾ç¤º</td>
                    <td>100å…ƒ</td>
                    <td class="highlight">0å…ƒ</td>
                    <td class="status-error">âŒ å¼‚å¸¸</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ¯ å¿«é€ŸéªŒè¯æ–¹æ³•</h2>
        <div class="step success">
            <p>åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œè¿™ä¸ªä¸€é”®æ£€æµ‹è„šæœ¬ï¼š</p>
            <div class="code">
async function quickCheck() {
  console.log('=== ç¬¬193æœŸæ•°æ®å¿«é€Ÿæ£€æµ‹ ===')
  
  // æ£€æŸ¥ç™»å½•çŠ¶æ€
  const { data: { user } } = await supabaseClient.auth.getUser()
  console.log('1. ç™»å½•çŠ¶æ€:', user ? 'âœ… å·²ç™»å½•' : 'âŒ æœªç™»å½•')
  
  if (!user) {
    console.log('è¯·å…ˆç™»å½•åå†æ£€æµ‹')
    return
  }
  
  // æŸ¥è¯¢æŠ•æ³¨è®°å½•
  const { data: bets, error } = await supabaseClient
    .from('bets')
    .select('*, rounds!inner(round_number)')
    .eq('rounds.round_number', 193)
    .eq('user_id', user.id)
  
  console.log('2. æŸ¥è¯¢é”™è¯¯:', error || 'âœ… æ— é”™è¯¯')
  console.log('3. æŠ•æ³¨è®°å½•æ•°:', bets?.length || 0)
  
  if (bets && bets.length > 0) {
    const bet = bets[0]
    console.log('4. æŠ•æ³¨é‡‘é¢:', bet.bet_amount)
    console.log('5. å®é™…èµ”ä»˜:', bet.actual_payout)
    console.log('6. æ˜¯å¦ä¸­å¥–:', bet.is_winner)
    console.log('7. çŠ¶æ€:', bet.status)
    
    if (bet.actual_payout === 0 && bet.is_winner) {
      console.log('âŒ å‘ç°é—®é¢˜: ä¸­å¥–ä½†èµ”ä»˜ä¸º0')
    } else if (bet.actual_payout > 0) {
      console.log('âœ… æ•°æ®æ­£å¸¸: èµ”ä»˜é‡‘é¢æ­£ç¡®')
    }
  } else {
    console.log('âŒ æœªæ‰¾åˆ°æŠ•æ³¨è®°å½•ï¼Œå¯èƒ½æ˜¯æƒé™é—®é¢˜')
  }
}

// è¿è¡Œæ£€æµ‹
quickCheck()
            </div>
        </div>

        <div class="step">
            <h3>ğŸ”„ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨</h3>
            <p>è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ç»™æŠ€æœ¯æ”¯æŒï¼š</p>
            <ul>
                <li>ç”¨æˆ·IDå’Œç™»å½•é‚®ç®±</li>
                <li>æµè§ˆå™¨ç±»å‹å’Œç‰ˆæœ¬</li>
                <li>æ§åˆ¶å°é”™è¯¯ä¿¡æ¯æˆªå›¾</li>
                <li>Networkè¯·æ±‚å“åº”æˆªå›¾</li>
                <li>æŠ•æ³¨è®°å½•é¡µé¢æˆªå›¾</li>
            </ul>
        </div>
    </div>
</body>
</html>
